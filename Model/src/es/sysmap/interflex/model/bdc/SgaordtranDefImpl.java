package es.sysmap.interflex.model.bdc;
import oracle.jbo.AttributeList;
import oracle.jbo.Key;
import oracle.jbo.server.AttributeListImpl;
import oracle.jbo.server.DBTransaction;
import oracle.jbo.server.EntityDefImpl;
import oracle.jbo.server.EntityImpl;
import oracle.jbo.domain.Number;

//  ---------------------------------------------------------------------
//  ---    File generated by Oracle ADF Business Components Design Time.
//  ---    Custom code may be added to this class.
//  ---    Warning: Do not modify method signatures of generated methods.
//  ---------------------------------------------------------------------

public class SgaordtranDefImpl extends EntityDefImpl 
{
  /**
   * 
   *  This is the default constructor (do not remove)
   */
  public SgaordtranDefImpl()
  {
  }
  
    public SgaordtranImpl createInstance(DBTransaction txn, 
                                   String idmac,
                                   String idtip,
                                   String estado,
                                   Number idordreubic,
                                   int idTraslo)
  {
    // La entidad ya crea la clave primaria a partir de una secuencia
    SgaordtranImpl ord = (SgaordtranImpl)super.createInstance(txn, null);
    ord.setIdmac(idmac);
    ord.setIdtip(idtip);
    ord.setEstado(estado);
    ord.setIdtraslo(new Number(idTraslo));

    // Si indica otro ordtran, hay que marcar el otro como pendiente de este    
    // :TODO Todo esto porque primero genera la orden de reubicación. Este es la orden que depende de la reubicación
    if (idordreubic != null)
    {
      txn.postChanges();  
      Object [] keyOb = new Object [] { idordreubic };
      Key ordtranKey = new Key (keyOb);
      SgaordtranImpl otroOrdtran = (SgaordtranImpl)SgaordtranImpl.getDefinitionObject().findByPrimaryKey(txn, ordtranKey);
      otroOrdtran.setIdordreubic(ord.getIdord());
    }
    return ord;
  }



}