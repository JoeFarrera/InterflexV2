package es.sysmap.interflex.modelrps.dmc;
import oracle.jbo.Key;
import oracle.jbo.Row;
import oracle.jbo.common.Configuration;
import oracle.jbo.domain.Number;
import oracle.jbo.server.ApplicationModuleImpl;
import es.sysmap.interflex.model.dmc.*;
//  ---------------------------------------------------------------------
//  ---    File generated by Oracle ADF Business Components Design Time.
//  ---    Custom code may be added to this class.
//  ---    Warning: Do not modify method signatures of generated methods.
//  ---------------------------------------------------------------------

public class AppModuleImpl extends ApplicationModuleImpl implements es.sysmap.interflex.modelrps.dmc.common.AppModule  
{


    private static final String amDef = "es.sysmap.interflex.model.dmc.AppModule";
    private static final String config = "AppModuleLocal";
    es.sysmap.interflex.model.dmc.AppModuleImpl appModuleSga = null;

  /**
   * 
   *  This is the default constructor (do not remove)
   */
  public AppModuleImpl()
  {
  }

  /**
   * 
   *  Container's getter for ZAgenciatipoenvioView1
   */
  public ZAgenciatipoenvioViewImpl getZAgenciatipoenvioView1()
  {
    return (ZAgenciatipoenvioViewImpl)findViewObject("ZAgenciatipoenvioView1");
  }

  /**
   * 
   *  Container's getter for ZTipoenvioView1
   */
  public ZTipoenvioViewImpl getZTipoenvioView1()
  {
    return (ZTipoenvioViewImpl)findViewObject("ZTipoenvioView1");
  }

  /**
   * 
   *  Sample main for debugging Business Components code using the tester.
   */
  public static void main(String[] args)
  {
    launchTester("es.sysmap.interflex.modelrps.dmc", "AppModuleLocal");
  }
  
  public es.sysmap.interflex.model.dmc.AppModuleImpl getAppModuleSga() 
  {
      if (appModuleSga == null)
          appModuleSga = (es.sysmap.interflex.model.dmc.AppModuleImpl)Configuration.createRootApplicationModule(amDef,config);
 
      return appModuleSga;
  }
  
  public void updateZAgenciatipoenvio () 
  {
    ZAgenciatipoenvioViewImpl zat = getZAgenciatipoenvioView1();
    zat.executeQuery();
    es.sysmap.interflex.model.dmc.AppModuleImpl app = getAppModuleSga();
    
    while (zat.hasNext()) 
    {
      ZAgenciatipoenvioViewRowImpl row = (ZAgenciatipoenvioViewRowImpl)zat.next();
      Integer id = (Integer)row.getAttribute("Id");
      Number numId = new Number(id.intValue());
      Object [] obj = {numId};
      
      Key idKey = new Key(obj); 
      app.getZAgenciatipoenvioView1().clearCache();
      es.sysmap.interflex.model.dmc.ZAgenciatipoenvioViewRowImpl agenciaTipoEnvio = null;
      Row [] rows = app.getZAgenciatipoenvioView1().findByKey(idKey, 1);
      
      if (rows != null && rows.length > 0) 
      {
        agenciaTipoEnvio = (es.sysmap.interflex.model.dmc.ZAgenciatipoenvioViewRowImpl)rows[0];

        agenciaTipoEnvio.setCodtra(row.getCodtra());
        agenciaTipoEnvio.setTipoenvio(row.getTipoenvio());
      }
      else
      {    
        es.sysmap.interflex.model.dmc.ZAgenciatipoenvioViewRowImpl newAgenciaTipoEnvio = (es.sysmap.interflex.model.dmc.ZAgenciatipoenvioViewRowImpl)app.getZAgenciatipoenvioView1().createRow();
        newAgenciaTipoEnvio.setId(numId);
        newAgenciaTipoEnvio.setCodtra(row.getCodtra());
        newAgenciaTipoEnvio.setTipoenvio(row.getTipoenvio());
        app.getZAgenciatipoenvioView1().insertRow(newAgenciaTipoEnvio);
      }

    }
    
    app.getTransaction().commit();
    }
  
  
  public void updateZTipoenvio () 
  {
    ZTipoenvioViewImpl zt = getZTipoenvioView1();
    zt.executeQuery();
    es.sysmap.interflex.model.dmc.AppModuleImpl app = getAppModuleSga();

    while (zt.hasNext()) 
    {
      ZTipoenvioViewRowImpl row = (ZTipoenvioViewRowImpl)zt.next();
      Integer id = (Integer)row.getAttribute("Id");
      Number numId = new Number(id.intValue());
      
      Object [] obj = {numId};
      Number idFormato = new Number(row.getIdformato().intValue());

     
      
      Key idKey = new Key(obj); 
      app.getZTipoenvioView1().clearCache();
      es.sysmap.interflex.model.dmc.ZTipoenvioViewRowImpl tipoEnvio = null;
      Row [] rows = app.getZTipoenvioView2().findByKey(idKey, 1);
      if (rows != null && rows.length > 0) 
      {
        tipoEnvio = (es.sysmap.interflex.model.dmc.ZTipoenvioViewRowImpl)rows[0];

        tipoEnvio.setIdformato(idFormato);
        tipoEnvio.setTipoenvio(row.getTipoenvio());
      }
      else
      {    
        es.sysmap.interflex.model.dmc.ZTipoenvioViewRowImpl newTipoEnvio = (es.sysmap.interflex.model.dmc.ZTipoenvioViewRowImpl)app.getZTipoenvioView1().createRow();
        newTipoEnvio.setId(numId);
        newTipoEnvio.setIdformato(idFormato);
        newTipoEnvio.setTipoenvio(row.getTipoenvio());
        app.getZTipoenvioView1().insertRow(newTipoEnvio);
      }

    }
    
    app.getTransaction().commit();
  }
  
  
}